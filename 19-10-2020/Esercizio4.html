<!DOCTYPE html>
<html>
	<head>
		<title>TableEx</title>
		
	    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

	</head>
	<body>

		<div id="div_uno"></div>


		<script type="text/javascript">

			// instanzio obj AJAX
			var xhttp = new XMLHttpRequest();

			// setto cosa fare quando tornano i dati
			xhttp.onreadystatechange = function(){

				// solo se la chiamata Ã¨ completa e risponde 200
				if(this.readyState == 4 && this.status == 200){

					// Viene ritornato un array 
					var json = JSON.parse(this.responseText);			
					console.log(json);


					var table= document.createElement("table");
					table.setAttribute("class", "table table-striped table-dark");

					// Creazione riferimento a "div_uno"
					var rif= document.getElementById("div_uno");
					// Si appende table a rif(div_uno)
					rif.appendChild(table);

					// Creazione riferimento thead
					var tHead = document.createElement("thead");
					// Si appende thead a table
					table.appendChild(tHead);


					// Creato la tr del thead
					var trHead = document.createElement("tr");
					// Appesa la tr alla thead
					tHead.appendChild(trHead);

					 
					// Vengono stampate le key del json e inserite nelle th del thead
					var keys= Object.keys(json[0]);
					for(var j = 0; j<keys.length; j++){
					    var thUno = document.createElement("th");
					    thUno.setAttribute("scope", "col");
					    trHead.appendChild(thUno);
						thUno.innerHTML = keys[j];
					}
					 

					var tBody = document.createElement("tbody");
					table.appendChild(tBody);

					// Vengono 
					for(var value in json){

						var tr = document.createElement("tr");
						tBody.appendChild(tr);
						var values = json[value];
						
						for(var v in values){
							var td= document.createElement("td");				
							tr.appendChild(td);
							td.innerHTML = values[v];

						}	
  					}		
				}
			};

			xhttp.open("GET", "https://jsonplaceholder.typicode.com/todos" , true);
			xhttp.send();

			

		</script>

		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
   		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>	

	</body>
</html>